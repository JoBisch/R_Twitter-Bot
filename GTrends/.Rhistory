rm(list = ls())
# packages _____________________________
packages <- c("gtrendsR", "twitteR", "rstudioapi", "ggplot2", "lubridate", "config")
ipak <- function(pkg){
new.pkg <- pkg[!(pkg %in% installed.packages()[, "Package"])]
if (length(new.pkg))
install.packages(new.pkg, dependencies = TRUE)
sapply(pkg, require, character.only = TRUE)
}
# usage ________________________________
ipak(packages)
# sets working directory to RScript location
if (Sys.getenv("RSTUDIO") == "1") {
wd <- dirname(rstudioapi::getSourceEditorContext()$path)
} else {
wd <- getSrcDirectory()[1]
}
today <- Sys.Date()
today.5y <- today %m+% years(-5)
# gtrends variables ____________________
# define the keywords __________________
keywords=c("Bitcoin")
# set the geographic area: DE = Germany
country=c("")
# set the time window __________________
time=(paste(today.5y, today, sep = " "))
# set channels _________________________
channel=c("web", "news", "images", "froogle", "youtube")
# get google trends data _______________
gtrends.data <- gtrends(keyword = keywords, geo = country, time = time,
gprop = channel,
category = 0, hl = "en-US", low_search_volume = FALSE,
cookie_url = "http://trends.google.com/Cookies/NID", tz = 0,
onlyInterest = FALSE)
# select only interst over time ________
gtrends.data.interest <- gtrends.data$interest_over_time
# bitcoin google trends plot 5 years ___
plot.5y <- ggplot(data=gtrends.data.interest, aes(x=date, y=hits)) +
geom_line(color = "black", size=1) +
ylab('Relative Interest') +
scale_y_continuous(expand = c(0, 0), breaks = seq(0, 100, 10)) +
theme_bw() +
labs(caption="Source: Google Trends (https://www.google.com/trends)") +
theme(legend.position = "none", axis.title.x=element_blank())
plot.5y
# save plot ____________________________
ggsave("gtrends_bitcoin_5y.png", plot = last_plot())
twitter <- config::get("twitter")
# twitter login credentuials ___________
consumerKey <- twitter$consumerKey
consumerSecret <- twitter$consumerSecret
accessToken <- twitter$accessToken
accessTokenSecret <- twitter$accessTokenSecret
wd
getSrcDirectory()[1]
}
wd <- getSrcDirectory(ipak)[1]
getSrcDirectory(ipak)[1]
getSrcDirectory(ipak)
wd <- getSrcDirectory(today)[1]
getSrcDirectory(today)[1]
getSrcDirectory(today)
# packages _____________________________
packages <- c("gtrendsR", "twitteR", "rstudioapi", "ggplot2", "lubridate", "config", "here")
ipak <- function(pkg){
new.pkg <- pkg[!(pkg %in% installed.packages()[, "Package"])]
if (length(new.pkg))
install.packages(new.pkg, dependencies = TRUE)
sapply(pkg, require, character.only = TRUE)
}
# usage ________________________________
ipak(packages)
# sets working directory to RScript location
if (Sys.getenv("RSTUDIO") == "1") {
wd <- dirname(rstudioapi::getSourceEditorContext()$path)
} else {
wd <- ''
}
here()
rm(list = ls())
# packages _____________________________
packages <- c("gtrendsR", "twitteR", "ggplot2", "lubridate", "config", "here")
ipak <- function(pkg){
new.pkg <- pkg[!(pkg %in% installed.packages()[, "Package"])]
if (length(new.pkg))
install.packages(new.pkg, dependencies = TRUE)
sapply(pkg, require, character.only = TRUE)
}
# usage ________________________________
ipak(packages)
# sets working directory to RScript location
if (Sys.getenv("RSTUDIO") == "1") {
wd <- dirname(rstudioapi::getSourceEditorContext()$path)
} else {
wd <- here()
}
# packages _____________________________
packages <- c("gtrendsR", "twitteR", "ggplot2", "lubridate", "config", "rstudioapi")
ipak <- function(pkg){
new.pkg <- pkg[!(pkg %in% installed.packages()[, "Package"])]
if (length(new.pkg))
install.packages(new.pkg, dependencies = TRUE)
sapply(pkg, require, character.only = TRUE)
}
# usage ________________________________
ipak(packages)
dirname(sys.frame(1)$ofile)
dirname(sys.frame(1)$ofile)
dirname(sys.frame(1)$ofile)
sys.frame(1)
rm(list = ls())
# packages _____________________________
packages <- c("gtrendsR", "twitteR", "ggplot2", "lubridate", "config", "rstudioapi")
ipak <- function(pkg){
new.pkg <- pkg[!(pkg %in% installed.packages()[, "Package"])]
if (length(new.pkg))
install.packages(new.pkg, dependencies = TRUE)
sapply(pkg, require, character.only = TRUE)
}
# usage ________________________________
ipak(packages)
# sets working directory to RScript location
#if (Sys.getenv("RSTUDIO") == "1") {
wd <- dirname(rstudioapi::getSourceEditorContext()$path)
getwd()
rm(list = ls())
# packages _____________________________
packages <- c("gtrendsR", "twitteR", "ggplot2", "lubridate", "config", "rstudioapi")
ipak <- function(pkg){
new.pkg <- pkg[!(pkg %in% installed.packages()[, "Package"])]
if (length(new.pkg))
install.packages(new.pkg, dependencies = TRUE)
sapply(pkg, require, character.only = TRUE)
}
# usage ________________________________
ipak(packages)
# sets working directory to RScript location
if (Sys.getenv("RSTUDIO") == "1") {
wd <- dirname(rstudioapi::getSourceEditorContext()$path)
} else {
wd <- '/home/R_Twitter-Bot/GTrends'
}
setwd(wd)
print(getwd())
today <- Sys.Date()
today.5y <- today %m+% years(-5)
# gtrends variables ____________________
# define the keywords __________________
keywords=c("Bitcoin")
# set the geographic area: DE = Germany
country=c("")
# set the time window __________________
time=(paste(today.5y, today, sep = " "))
# set channels _________________________
channel=c("web", "news", "images", "froogle", "youtube")
# get google trends data _______________
gtrends.data <- gtrends(keyword = keywords, geo = country, time = time,
gprop = channel,
category = 0, hl = "en-US", low_search_volume = FALSE,
cookie_url = "http://trends.google.com/Cookies/NID", tz = 0,
onlyInterest = FALSE)
# select only interst over time ________
gtrends.data.interest <- gtrends.data$interest_over_time
# bitcoin google trends plot 5 years ___
plot.5y <- ggplot(data=gtrends.data.interest, aes(x=date, y=hits)) +
geom_line(color = "black", size=1) +
ylab('Relative Interest') +
scale_y_continuous(expand = c(0, 0), breaks = seq(0, 100, 10)) +
theme_bw() +
labs(caption="Source: Google Trends (https://www.google.com/trends)") +
theme(legend.position = "none", axis.title.x=element_blank())
plot.5y
# save plot ____________________________
ggsave("gtrends_bitcoin_5y.png", plot = last_plot())
twitter <- config::get("twitter")
# twitter login credentuials ___________
consumerKey <- twitter$consumerKey
consumerSecret <- twitter$consumerSecret
accessToken <- twitter$accessToken
accessTokenSecret <- twitter$accessTokenSecret
# connect to twitter ___________________
setup_twitter_oauth(consumerKey,consumerSecret,accessToken,accessTokenSecret)
